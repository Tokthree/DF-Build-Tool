#:kivy 2.1.0

<BuildScreen>:
    cols: 1
    canvas.before:
        Rectangle:
            source: './images/background.jpg'
            size: self.size
            pos:self.pos

    #Header container
    BoxLayout:
        size_hint_y: None
        height: 40
        canvas:
            Color:
                rgba: (0,0,0,0.6)
            Rectangle:
                size: self.size
                pos: self.pos
        Label:
            text: 'Dead Frontier Build Tool'
            size: self.texture_size

    #Content container
    GridLayout:
        cols: 1
        padding: 20

        #Content subcontainer
        BoxLayout:
            orientation: 'vertical'
            spacing: 20

            #Stats container
            GridLayout:
                cols: 3
                spacing: 20

                #Character Stats subcontainer
                GridLayout:
                    cols: 1
                    spacing: 10
                    canvas:
                        Color:
                            rgba: (0,0,0,0.6)
                        Rectangle:
                            size: self.size
                            pos: self.pos

                    #Header container
                    BoxLayout:
                        size_hint_y: None
                        height: 40
                        Label:
                            text: 'Character Stats'
                            size: self.texture_size

                    #Content container
                    GridLayout:
                        cols: 1
                        padding: 10
                        spacing: 10

                        #Base stats subcontainer
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: 90
                            canvas:
                                Color:
                                    rgba: (255,255,255,0.05)
                                Rectangle:
                                    size: self.size
                                    pos: self.pos

                            #Title container
                            BoxLayout:
                                size_hint_y: None
                                height: 30
                                Label:
                                    text: 'Base Stats'
                                    size: self.texture_size
                            
                            #Input container
                            GridLayout:
                                cols: 3
                                size_hint_y: None
                                height: 60
                                Label:
                                    size_hint_y: None
                                    height: 30
                                    text: 'Profession'
                                Label:
                                    size_hint_y: None
                                    height: 30
                                    text: 'Level'
                                Label:
                                    size_hint_y: None
                                    height: 30
                                    text: 'Level Req.'
                                Spinner:
                                    id: professionSelect
                                    size_hint_y: None
                                    height: 30
                                    text: 'Production / Roleplay'
                                    values: []
                                    sync_height: True
                                    on_text: root.profession_select()
                                TextInput:
                                    id: levelInput
                                    text: '1'
                                    height: 30
                                    input_filter: 'int'
                                    multiline: False
                                    on_text: root.level_input('input')
                                    on_focus:
                                        if not self.focus: root.level_input('validate')
                                Label:
                                    size_hint_y: None
                                    height: 30
                                    text: str(root.character.required_level)
                        
                        #Stat allocation subcontainer
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: 90
                            canvas:
                                Color:
                                    rgba: (255,255,255,0.05)
                                Rectangle:
                                    size: self.size
                                    pos: self.pos

                            #Title container
                            GridLayout:
                                cols: 2
                                size_hint_y: None
                                height: 30
                                Label:
                                    text: 'Stats'
                                    size: self.texture_size
                                Label:
                                    text: 'Points used: {}/{}'.format(root.character.stat_points_used, root.character.stat_points)
                                    size: self.texture_size
                            
                            #Input container
                            BoxLayout:
                                spacing: 10
                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: 10
                                    Label:
                                        size_hint: (None, None)
                                        height: 30
                                        text: 'Strength'
                                    Slider:
                                        id: strength
                                        size_hint_y: None
                                        height: 30
                                        min: 25
                                        max: (100 - root.character.stat_bonus_totals['strength'])
                                        step: 1
                                        on_value: 
                                            root.character.set_stat('strength', self.value)
                                    Label:
                                        text: '{} ({} + {})'.format(root.character.stat_totals['strength'], root.ids.strength.value, root.character.stat_bonus_totals['strength'])
                                        size_hint: (None, None)
                                        height: 30
                         
                #Weapon Stats subcontainer
                GridLayout:
                    cols: 1
                    spacing: 10
                    canvas:
                        Color:
                            rgba: (0,0,0,0.6)
                        Rectangle:
                            size: self.size
                            pos: self.pos

                    #Header container
                    BoxLayout:
                        size_hint_y: None
                        height: 40
                        Label:
                            text: 'Weapon Stats'

                    #Content container
                    BoxLayout:
                        orientation: 'vertical'

                #Total Stats subcontainer
                GridLayout:
                    cols: 1
                    spacing: 10
                    canvas:
                        Color:
                            rgba: (0,0,0,0.6)
                        Rectangle:
                            size: self.size
                            pos: self.pos

                    #Header container
                    BoxLayout:
                        size_hint_y: None
                        height: 40
                        Label:
                            text: 'Total Stats'

                    #Content container
                    BoxLayout:
                        orientation: 'vertical'

            #Implants container
            #GridLayout:
                #cols:1
                #canvas:
                    #Color:
                        #rgba: (0,0,0,0.6)
                    #Rectangle:
                        #size: self.size
                        #pos: self.pos

    #Footer container
    BoxLayout:
        size_hint_y: None
        height: 40
        canvas:
            Color:
                rgba: (0,0,0,0.6)
            Rectangle:
                size: self.size
                pos: self.pos
        Label:
            text: 'Coded and maintaned by Rebekah | All non-code assets are the property of Creaky Corpse LTD and are utilised under fair-use'
            size: self.texture_size